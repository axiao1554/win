"use strict";$(function(){var e=document.body,t=document.getElementById("mnav"),i=document.getElementById("main-menu"),n=document.getElementById("process"),o=document.querySelectorAll(".img-ajax"),l=(document.getElementById("comments-count"),document.getElementById("gitcomment"),document.getElementById("back-to-top")),s=document.getElementById("article-toc"),a=i.querySelector("ul").children,r=document.URL,c=document.location.origin,p=a.length,d=null;(function(){if("micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i))return 1}()||function(){if("qq"==navigator.userAgent.toLowerCase().match(/QQ/i))return 1}())&&(window.location.href="/fh");var m,u,f=!0;1==/iphone|ios|android|ipod/i.test(navigator.userAgent.toLowerCase())&&"mobile"!=(m=location.search,u="from",(u=new RegExp("(?:&|/?)"+u+"=([^&$]+)").exec(m))?u[1]:"")&&(f=!1),t.onclick=function(){"-1"!=i.getAttribute("class").indexOf("in")?i.setAttribute("class","collapse navbar-collapse"):i.setAttribute("class","collapse navbar-collapse in")};for(var g=0;g<p;g++)r==c+a[g].querySelector(".main-a").getAttribute("href")&&a[g].classList.add("active"),a[g].index=g,a[g].onclick=function(){$(this).siblings("li").removeClass("active"),a[this.index].classList.add("active"),$(this).hasClass("act")?($(".main-navigation .menu li ul").slideUp("500"),$(this).removeClass("act"),$(".main-navigation .menu li").find(".fa-angle-up").attr("class","fa fa-angle-down")):($(this).siblings("li").removeClass("act"),$(".main-navigation .menu li ul").slideUp("500"),$(this).addClass("act"),$(this).find("ul").slideToggle(500),$(".main-navigation .menu li").find(".fa-angle-up").attr("class","fa fa-angle-down"),$(this).find(".fa-angle-down").attr("class","fa fa-angle-up")),"./#playlist/"==$(this).find(".main-a").attr("href")&&($(".playlist").hasClass("timeload")||($(".playlist").append('<div class="playload"><i class="fa fa-refresh fa-spin"></i></div>'),setTimeout(function(){$(".playload").remove()},3e3),$(".playlist").addClass("timeload")),$(".playlist").slideToggle(500))};function y(){$(".aplayer.aplayer-narrow .aplayer-pic").hasClass("rotate")?$(".aplayer.aplayer-narrow .aplayer-pic").addClass("rotate"):$(".aplayer.aplayer-narrow .aplayer-pic").removeClass("rotate")}function h(){return e.scrollTop||document.documentElement.scrollTop}null!==document.querySelector(".playlist")&&($(".playlist").on("click",".aplayer .aplayer-miniswitcher",function(){$(".playlist").hasClass("mini")?(f||("fixed"==$(".playlist").css("position")?$(".playlist").css("cssText","position:fixed;top:-5px;left:15px;right:15px;"):$(".playlist").css("cssText","position:relative;top:0px;left:0px;right:0px;")),$(".playlist").removeClass("mini"),$(this).css("cssText","width:20px !important;height:20px !important"),$(".aplayer .aplayer-miniswitcher .aplayer-icon").css("cssText","transform:rotateY(180deg);-webkit-transform:rotateY(180deg);-moz-transform:rotateY(180deg);"),$(".aplayer.aplayer-withlrc .aplayer-pic").removeClass("rotate")):(f||("fixed"==$(".playlist").css("position")?$(".playlist").css("cssText","position:fixed;top:-5px;right:15px;"):$(".playlist").css("cssText","position:absolute;top:-5px;right:15px;")),$(".playlist").addClass("mini"),$(this).css("cssText","width:15px !important;height:100% !important;"),$(".aplayer .aplayer-miniswitcher .aplayer-icon").css("cssText","transform:rotateY(360deg);-webkit-transform:rotateY(360deg);-moz-transform:rotateY(360deg);"),null!==document.querySelector(".aplayer .aplayer-pic .aplayer-pause")&&$(".aplayer.aplayer-narrow .aplayer-pic").addClass("rotate"))}),$(".playlist").on("click",".aplayer.aplayer-narrow .aplayer-pic",function(){$(this).hasClass("rotate")?$(this).removeClass("rotate"):$(this).addClass("rotate")}),$(".playlist").on("click",".aplayer .aplayer-pic .aplayer-play",function(){y()}),$(".playlist").on("click",".aplayer .aplayer-pic .aplayer-pause",function(){y()}));function x(){n&&(n.style.width=h()/(e.scrollHeight-window.innerHeight)*100+"%"),300<=h()?l.removeAttribute("class","hide"):l.setAttribute("class","hide");var i=o;if(i){var t=i.length;if(0<t)for(var a=h()+window.innerHeight,s=0;s<t;s++)!function(){var t,e=i[s];e.getBoundingClientRect().top+window.pageYOffset-document.documentElement.clientTop<=a&&e.getAttribute("data-src")&&0<e.getAttribute("data-src").length&&("img"===e.nodeName.toLowerCase()?(e.src=e.getAttribute("data-src"),e.style.display="block"):((t=new Image).onload=function(){e.innerHTML=""},t.src=e.getAttribute("data-src"),e.style.backgroundImage="url("+e.getAttribute("data-src")+")"),e.removeAttribute("data-src"))}()}}x(),f&&($(".main-navigation .menu li").hover(function(){$(this).find("ul").slideDown(500),$(this).find(".fa-angle-down").attr("class","fa fa-angle-up")},function(){$(this).find("ul").stop(!0,!1).slideUp("fast"),$(this).find(".fa-angle-up").attr("class","fa fa-angle-down")}),$(".toc-link").click(function(){var t=$(this).attr("href");(t=t)&&"#"!==t&&(t=document.querySelector(decodeURIComponent(t)))&&t.offsetTop&&window.scrollTo(0,t.offsetTop+200)}));var v=$(document).scrollTop();function b(t){var e,i,a;s&&(e=s.offsetTop,i=s.offsetLeft,a=s.offsetWidth,h()<=e?s.style="":(s.style.position="fixed",s.style.top=t+"px",s.style.transition="top 0.5s",s.style.left=i+"px",s.style.width=a+"px"))}function w(){for(var t=$(".post-body").find("img"),e=0;e<t.length;e++)t[e].onclick=function(t){var t=t.srcElement.currentSrc,o=($(this),t=t,e=$("<div id='outerDiv'  style='position:fixed;top:0;left:0;background:rgba(0,0,0,0.7);z-index:100;width:100%;height:100%;display:none;'><div id='innerDiv' style='position:absolute;'><img  id='bigImg' src=''/></div></div>"),$("#outerDiv").remove(),$("body").append(e),"#outerDiv"),l="#innerDiv",r="#bigImg",e=t;$(r).attr("src",e),$("<img/>").attr("src",e).on("load",function(){var t,e,i=$(window).width(),a=$(window).height(),s=this.width,n=this.height,s=(a<n?i<(t=(e=a)/n*s)&&(e=(t=i)/s*n):e=i<s?(t=i)/s*n:(t=s,n),$(r).css("width",t),(i-t)/2),n=(a-e)/2;$(l).css({top:n,left:s}),$(o).fadeIn("fast")}),$(o).click(function(){$(this).fadeOut("fast")})}}window.addEventListener("scroll",function(){var t=$(document).scrollTop();f?(t<v?t<=180?($(".main-navigation").css("cssText","position:relative;top:0px;"),$(".post-a").css("margin-top","0"),s&&(s.style="")):($(".main-navigation").css("cssText","position:fixed;top:0px;transition: top 0.5s;-webkit-transition: top 0.5s;-moz-transition: top 0.5s;"),$(".post-a").css("margin-top","80px"),"block"!=$(".playlist").css("display")||$(".playlist").hasClass("mini")?b(80):b(140)):180<=t&&("block"!=$(".playlist").css("display")||$(".playlist").hasClass("mini")?$(".main-navigation").css("cssText","position:fixed;top:0px;transition: top 0.5s;-webkit-transition: top 0.5s;-moz-transition: top 0.5s;"):$(".main-navigation").css("cssText","position:fixed;top:-60px;transition: top 0.5s;-webkit-transition: top 0.5s;-moz-transition: top 0.5s;"),$(".post-a").css("margin-top","80px"),b(80)),v=$(document).scrollTop()):"block"==$(".playlist").css("display")&&($(".playlist").hasClass("mini")?180<t?$(".playlist").css("position","fixed"):$(".playlist").css("position","absolute"):240<t?$(".playlist").css("cssText","position:fixed;top:-5px;left:15px;right:15px;"):$(".playlist").css("cssText","position:relative;top:0px;left:0px;right:0px;")),clearTimeout(d),d=setTimeout(function(){x()},200)}),l.onclick=function(){document.body.scrollTop=0,document.documentElement.scrollTop=0},setTimeout(function(){w()},1e3),$(".highlight").not(".gist .highlight").each(function(t,e){var i=$("<div>").addClass("highlight-wrap");$(e).after(i),i.append($("<button>").addClass("copy-btn").append("复制").on("click",function(t){var e=$(this).parent().find(".code").find(".line").map(function(t,e){return $(e).text()}).toArray().join("\n"),i=document.createElement("textarea"),a=window.pageYOffset||document.documentElement.scrollTop,a=(i.style.top=a+"px",i.style.position="absolute",i.style.opacity="0",i.readOnly=!0,i.value=e,document.body.appendChild(i),document.getSelection()),s=0<a.rangeCount&&a.getRangeAt(0);i.select(),i.setSelectionRange(0,e.length),i.readOnly=!1,document.execCommand("copy")?$(this).text("复制成功"):$(this).text("复制失败"),i.blur(),$(this).blur(),s&&(a.removeAllRanges(),a.addRange(s))})).on("mouseleave",function(t){var e=$(this).find(".copy-btn");setTimeout(function(){e.text("复制")},300)}).append(e)}),$(document).pjax("a[target!=_blank]","#pjax",{fragment:"#pjax",timeout:8e3}),$(document).on("pjax:start",NProgress.start).on("pjax:end",NProgress.done),$(document).on("pjax:complete",function(t){i.setAttribute("class","collapse navbar-collapse"),null!==document.getElementById("result-mask")&&$.getScript("/js/search.js"),$.getScript("/js/post.js"),$.getScript("//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/social-share.js/1.0.16/js/social-share.min.js")}),console.log("%c 阿小会员网 - Win软件之家 %c https://win.axiao.vip","color:#fff;font-size:12px;padding:10px;background-image: -webkit-linear-gradient(45deg,#00bd6d,#fff);","color:#fff;font-size:12px;padding:10px;background-image: -webkit-linear-gradient(45deg,#00bd6d,#fff);")});