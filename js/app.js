"use strict";$(function(){var n=document.body,t=document.getElementById("mnav"),e=document.getElementById("main-menu"),l=document.getElementById("process"),o=document.querySelectorAll(".img-ajax"),r=(document.getElementById("comments-count"),document.getElementById("gitcomment"),document.getElementById("back-to-top")),s=document.getElementById("article-toc"),a=e.querySelector("ul").children,i=document.URL,c=document.location.origin,p=a.length,d=null;(function(){if("micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i))return 1}()||function(){if("qq"==navigator.userAgent.toLowerCase().match(/QQ/i))return 1}())&&(window.location.href="/fh");var u,m,f=!0;1==/iphone|ios|android|ipod/i.test(navigator.userAgent.toLowerCase())&&"mobile"!=(u=location.search,m="from",(m=new RegExp("(?:&|/?)"+m+"=([^&$]+)").exec(u))?m[1]:"")&&(f=!1),t.onclick=function(){"-1"!=e.getAttribute("class").indexOf("in")?e.setAttribute("class","collapse navbar-collapse"):e.setAttribute("class","collapse navbar-collapse in")};for(var g=0;g<p;g++)i==c+a[g].querySelector(".main-a").getAttribute("href")&&a[g].classList.add("active"),a[g].index=g,a[g].onclick=function(){$(this).siblings("li").removeClass("active"),a[this.index].classList.add("active"),$(this).hasClass("act")?($(".main-navigation .menu li ul").slideUp("500"),$(this).removeClass("act"),$(".main-navigation .menu li").find(".fa-angle-up").attr("class","fa fa-angle-down")):($(this).siblings("li").removeClass("act"),$(".main-navigation .menu li ul").slideUp("500"),$(this).addClass("act"),$(this).find("ul").slideToggle(500),$(".main-navigation .menu li").find(".fa-angle-up").attr("class","fa fa-angle-down"),$(this).find(".fa-angle-down").attr("class","fa fa-angle-up")),"./#playlist/"==$(this).find(".main-a").attr("href")&&($(".playlist").hasClass("timeload")||($(".playlist").append('<div class="playload"><i class="fa fa-refresh fa-spin"></i></div>'),setTimeout(function(){$(".playload").remove()},5e3),$(".playlist").addClass("timeload")),$(".playlist").slideToggle(500))};function y(){$(".aplayer.aplayer-narrow .aplayer-pic").hasClass("rotate")?$(".aplayer.aplayer-narrow .aplayer-pic").addClass("rotate"):$(".aplayer.aplayer-narrow .aplayer-pic").removeClass("rotate")}function h(){return n.scrollTop||document.documentElement.scrollTop}null!==document.querySelector(".playlist")&&($(".playlist").on("click",".aplayer .aplayer-miniswitcher",function(){$(".playlist").hasClass("mini")?(f||("fixed"==$(".playlist").css("position")?$(".playlist").css("cssText","position:fixed;top:-5px;left:15px;right:15px;"):$(".playlist").css("cssText","position:relative;top:0px;left:0px;right:0px;")),$(".playlist").removeClass("mini"),$(this).css("cssText","width:20px !important;height:20px !important"),$(".aplayer .aplayer-miniswitcher .aplayer-icon").css("transform","rotateY(180deg)"),$(".aplayer.aplayer-withlrc .aplayer-pic").removeClass("rotate")):(f||("fixed"==$(".playlist").css("position")?$(".playlist").css("cssText","position:fixed;top:-5px;right:15px;"):$(".playlist").css("cssText","position:absolute;top:-5px;right:15px;")),$(".playlist").addClass("mini"),$(this).css("cssText","width:15px !important;height:100% !important;"),$(".aplayer .aplayer-miniswitcher .aplayer-icon").css("transform","rotateY(360deg)"),null!==document.querySelector(".aplayer .aplayer-pic .aplayer-pause")&&$(".aplayer.aplayer-narrow .aplayer-pic").addClass("rotate"))}),$(".playlist").on("click",".aplayer.aplayer-narrow .aplayer-pic",function(){$(this).hasClass("rotate")?$(this).removeClass("rotate"):$(this).addClass("rotate")}),$(".playlist").on("click",".aplayer .aplayer-pic .aplayer-play",function(){y()}),$(".playlist").on("click",".aplayer .aplayer-pic .aplayer-pause",function(){y()}));function x(){l&&(l.style.width=h()/(n.scrollHeight-window.innerHeight)*100+"%"),300<=h()?r.removeAttribute("class","hide"):r.setAttribute("class","hide");var a=o;if(a){var t=a.length;if(0<t)for(var i=h()+window.innerHeight,s=0;s<t;s++)!function(){var t,e=a[s];e.getBoundingClientRect().top+window.pageYOffset-document.documentElement.clientTop<=i&&e.getAttribute("data-src")&&0<e.getAttribute("data-src").length&&("img"===e.nodeName.toLowerCase()?(e.src=e.getAttribute("data-src"),e.style.display="block"):((t=new Image).onload=function(){e.innerHTML=""},t.src=e.getAttribute("data-src"),e.style.backgroundImage="url("+e.getAttribute("data-src")+")"),e.removeAttribute("data-src"))}()}}x(),f&&$(".main-navigation .menu li").hover(function(){$(this).find("ul").slideDown(500),$(this).find(".fa-angle-down").attr("class","fa fa-angle-up")},function(){$(this).find("ul").stop(!0,!1).slideUp("fast"),$(this).find(".fa-angle-up").attr("class","fa fa-angle-down")});var v=$(document).scrollTop();function b(){for(var t=$(".post-body").find("img"),e=0;e<t.length;e++)t[e].onclick=function(t){var t=t.srcElement.currentSrc,l=($(this),t=t,e=$("<div id='outerDiv'  style='position:fixed;top:0;left:0;background:rgba(0,0,0,0.7);z-index:5;width:100%;height:100%;display:none;'><div id='innerDiv' style='position:absolute;'><img  id='bigImg' style='border:5px solid #fff;' src=''/></div></div>"),$("#outerDiv").remove(),$("body").append(e),"#outerDiv"),o="#innerDiv",r="#bigImg",e=t;$(r).attr("src",e),$("<img/>").attr("src",e).load(function(){var t,e,a=$(window).width(),i=$(window).height(),s=this.width,n=this.height,s=(.8*i<n?.95*a<(t=(e=.8*i)/n*s)&&(e=(t=.95*a)/s*n):e=.8*a<s?(t=.95*a)/s*n:(t=s,n),$(r).css("width",t),(a-t)/2),n=(i-e)/2;$(o).css({top:n,left:s}),$(l).fadeIn("fast")}),$(l).click(function(){$(this).fadeOut("fast")})}}window.addEventListener("scroll",function(){function t(t){var e,a,i;s&&(e=s.offsetTop,a=s.offsetLeft,i=s.offsetWidth,h()<=e?s.style="":(s.style.position="fixed",s.style.top=t+"px",s.style.left=a+"px",s.style.width=i+"px"))}var e=$(document).scrollTop();f?(240<e?($("#main-menu").css("cssText","display:none !important;"),$(".main-navigation").css("position","fixed")):$("#main-menu").css("cssText","display:block !important;"),e<v?(e<=180&&$(".main-navigation").css("position","relative"),$("#main-menu").css("cssText","display:block !important;"),"block"!=$(".playlist").css("display")||$(".playlist").hasClass("mini")?t(80):t(140)):"block"!=$(".playlist").css("display")||$(".playlist").hasClass("mini")?t(20):t(80),v=$(document).scrollTop()):"block"==$(".playlist").css("display")&&($(".playlist").hasClass("mini")?180<e?$(".playlist").css("position","fixed"):$(".playlist").css("position","absolute"):240<e?$(".playlist").css("cssText","position:fixed;top:-5px;left:15px;right:15px;"):$(".playlist").css("cssText","position:relative;top:0px;left:0px;right:0px;")),clearTimeout(d),d=setTimeout(function(){x()},200)}),r.onclick=function(){cancelAnimationFrame(d),d=requestAnimationFrame(function t(){var e=h();0<e?(n.scrollTop=document.documentElement.scrollTop=e-50,d=requestAnimationFrame(t)):cancelAnimationFrame(d)})},setTimeout(function(){b()},1e3),$(".highlight").not(".gist .highlight").each(function(t,e){var a=$("<div>").addClass("highlight-wrap");$(e).after(a),a.append($("<button>").addClass("copy-btn").append("复制").on("click",function(t){var e=$(this).parent().find(".code").find(".line").map(function(t,e){return $(e).text()}).toArray().join("\n"),a=document.createElement("textarea"),i=window.pageYOffset||document.documentElement.scrollTop,i=(a.style.top=i+"px",a.style.position="absolute",a.style.opacity="0",a.readOnly=!0,a.value=e,document.body.appendChild(a),document.getSelection()),s=0<i.rangeCount&&i.getRangeAt(0);a.select(),a.setSelectionRange(0,e.length),a.readOnly=!1,document.execCommand("copy")?$(this).text("复制成功"):$(this).text("复制失败"),a.blur(),$(this).blur(),s&&(i.removeAllRanges(),i.addRange(s))})).on("mouseleave",function(t){var e=$(this).find(".copy-btn");setTimeout(function(){e.text("复制")},300)}).append(e)}),$(document).pjax("a[target!=_blank]","#pjax",{fragment:"#pjax",timeout:8e3}),$(document).on("pjax:start",NProgress.start).on("pjax:end",NProgress.done),$(document).on("pjax:complete",function(t){e.setAttribute("class","collapse navbar-collapse"),null!==document.getElementById("result-mask")&&$.getScript("//cdn.jsdelivr.net/gh/axiao1554/cloud/assets/js/search.js"),$.getScript("//cdn.jsdelivr.net/gh/axiao1554/cloud/assets/js/post.js"),$.getScript("//cdn.bootcdn.net/ajax/libs/social-share.js/1.0.16/js/jquery.share.min.js")}),console.log("%c 阿小会员网 - Win软件之家 %c https://win.axiao.vip","color:#fff;font-size:12px;padding:10px;background-image: -webkit-linear-gradient(45deg,#00bd6d,#fff);","color:#fff;font-size:12px;padding:10px;background-image: -webkit-linear-gradient(45deg,#00AAEE,#fff);")});